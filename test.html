<!doctype html>
<html lang="fr" class="no-js">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="css/reset.css"> <!-- CSS reset -->
	<link rel="stylesheet" href="css/style.css"> <!-- Resource style -->
	<script src="js/modernizr.js"></script> <!-- Modernizr -->

	<!-- FAVICON -->
	<link rel="icon" href="img/logoIMSSA.ico" type="image/x-icon">

	<title>Site IMSSA | Test</title>
</head>

<body>
	<header>
		<div class="navbar">
			<div>
				<a href="index.html" class="nav__logo">
					<img src="img/logoIMSSA.ico" alt="logo IMSSA" id="logo_header"> IMSSA accueil
				</a>
			</div>
			<div class="cd-dropdown-wrapper">

				<a href="menu.html" id="btn-fav" class="navbar-btn">‚ù§Ô∏è</a>
				<a href="#0" id="btn-google" class="navbar-btn">üîí</a>

				<!--		 DROPDOWN		 -->
				<a class="cd-dropdown-trigger" href="#0">Menu</a>
				<nav class="cd-dropdown">
					<h2>Menu</h2>
					<a href="#0" class="cd-close">Fermer</a>
					<ul class="cd-dropdown-content">

						<li class="cd-divider">Exercices</li>
						<!--		 √âtirements - Mobilit√©		 -->
						<li class="has-children">
							<a href="#0">√âtirements - Mobilit√©</a>

							<ul class="cd-secondary-dropdown is-hidden">
								<li class="go-back"><a href="#0">Menu</a></li>
								<li class="see-all"><a href="cat√©gories/EtirementsMobilite.html">Tous les exercices</a></li>

								<!--		 Cat√©gorie 1		 -->
								<li class="has-children">
									<a href="#0">Membre inf√©rieur</a>

									<ul class="is-hidden">
										<li class="go-back"><a href="#0">Retour</a></li>
										<li class="see-all"><a href="http://codyhouse.co/?p=748">Voir tout</a></li>
										<li><a href="http://codyhouse.co/?p=748">Blazers</a></li>
										<li><a href="http://codyhouse.co/?p=748">Bomber jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Denim Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Duffle Coats</a></li>
										<li><a href="http://codyhouse.co/?p=748">Leather Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Parkas</a></li>
									</ul>
								</li>
								<!--		 Cat√©gorie 2		 -->
								<li class="has-children">
									<a href="#0">Membre sup√©rieur</a>

									<ul class="is-hidden">
										<li class="go-back"><a href="#0">Retour</a></li>
										<li class="see-all"><a href="http://codyhouse.co/?p=748">Voir tout</a></li>
										<li><a href="http://codyhouse.co/?p=748">Blazers</a></li>
										<li><a href="http://codyhouse.co/?p=748">Bomber jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Denim Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Duffle Coats</a></li>
										<li><a href="http://codyhouse.co/?p=748">Leather Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Parkas</a></li>
									</ul>
								</li>
								<!--		 Cat√©gorie 3		 -->
								<li class="has-children">
									<a href="#0">Colonne</a>

									<ul class="is-hidden">
										<li class="go-back"><a href="#0">Retour</a></li>
										<li class="see-all"><a href="http://codyhouse.co/?p=748">Voir tout</a></li>
										<li><a href="http://codyhouse.co/?p=748">Blazers</a></li>
										<li><a href="http://codyhouse.co/?p=748">Bomber jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Denim Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Duffle Coats</a></li>
										<li><a href="http://codyhouse.co/?p=748">Leather Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Parkas</a></li>
									</ul>
								</li>

							</ul> <!-- .cd-secondary-dropdown -->
						</li> <!-- 	√âtirements - Mobilit√© FIN	 -->

						<!--		 Renforcement - Proprioception		 -->
						<li class="has-children">
							<a href="#0">Renforcement - Proprioception</a>

							<ul class="cd-secondary-dropdown is-hidden">
								<li class="go-back"><a href="#0">Menu</a></li>
								<li class="see-all"><a href="cat√©gories/RenforcementProprioception.html">Tous les exercices</a></li>

								<!--		 Cat√©gorie 1		 -->
								<li class="has-children">
									<a href="#0">Membre inf√©rieur renf</a>

									<ul class="is-hidden">
										<li class="go-back"><a href="#0">Retour</a></li>
										<li class="see-all"><a href="http://codyhouse.co/?p=748">Voir tout</a></li>
										<li><a href="http://codyhouse.co/?p=748">Blazers</a></li>
										<li><a href="http://codyhouse.co/?p=748">Bomber jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Denim Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Duffle Coats</a></li>
										<li><a href="http://codyhouse.co/?p=748">Leather Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Parkas</a></li>
									</ul>
								</li>
								<!--		 Cat√©gorie 2		 -->
								<li class="has-children">
									<a href="#0">Membre sup√©rieur renf</a>

									<ul class="is-hidden">
										<li class="go-back"><a href="#0">Retour</a></li>
										<li class="see-all"><a href="http://codyhouse.co/?p=748">Voir tout</a></li>
										<li><a href="http://codyhouse.co/?p=748">Blazers</a></li>
										<li><a href="http://codyhouse.co/?p=748">Bomber jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Denim Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Duffle Coats</a></li>
										<li><a href="http://codyhouse.co/?p=748">Leather Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Parkas</a></li>
									</ul>
								</li>
								<!--		 Cat√©gorie 3		 -->
								<li class="has-children">
									<a href="#0">Colonne renf</a>

									<ul class="is-hidden">
										<li class="go-back"><a href="#0">Retour</a></li>
										<li class="see-all"><a href="http://codyhouse.co/?p=748">Voir tout</a></li>
										<li><a href="http://codyhouse.co/?p=748">Blazers</a></li>
										<li><a href="http://codyhouse.co/?p=748">Bomber jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Denim Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Duffle Coats</a></li>
										<li><a href="http://codyhouse.co/?p=748">Leather Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Parkas</a></li>
									</ul>
								</li>

							</ul> <!-- .cd-secondary-dropdown -->
						</li> <!-- 	Renforcement - Proprioception FIN	 -->

						<!--		 R√©athl√©tisation		 -->
						<li class="has-children">
							<a href="#0">R√©athl√©tisation</a>

							<ul class="cd-secondary-dropdown is-hidden">
								<li class="go-back"><a href="#0">Menu</a></li>
								<li class="see-all"><a href="cat√©gories/Reathletisation.html">Tous les exercices</a></li>

								<!--		 Cat√©gorie 1		 -->
								<li class="has-children">
									<a href="#0">Haut du corps</a>

									<ul class="is-hidden">
										<li class="go-back"><a href="#0">Retour</a></li>
										<li class="see-all"><a href="http://codyhouse.co/?p=748">Voir tout</a></li>
										<li><a href="http://codyhouse.co/?p=748">Blazers</a></li>
										<li><a href="http://codyhouse.co/?p=748">Bomber jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Denim Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Duffle Coats</a></li>
										<li><a href="http://codyhouse.co/?p=748">Leather Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Parkas</a></li>
									</ul>
								</li>
								<!--		 Cat√©gorie 2		 -->
								<li class="has-children">
									<a href="#0">Bas du corps</a>

									<ul class="is-hidden">
										<li class="go-back"><a href="#0">Retour</a></li>
										<li class="see-all"><a href="http://codyhouse.co/?p=748">Voir tout</a></li>
										<li><a href="http://codyhouse.co/?p=748">Blazers</a></li>
										<li><a href="http://codyhouse.co/?p=748">Bomber jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Denim Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Duffle Coats</a></li>
										<li><a href="http://codyhouse.co/?p=748">Leather Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Parkas</a></li>
									</ul>
								</li>
								<!--		 Cat√©gorie 3		 -->
								<li class="has-children">
									<a href="#0">Cardio</a>

									<ul class="is-hidden">
										<li class="go-back"><a href="#0">Retour</a></li>
										<li class="see-all"><a href="http://codyhouse.co/?p=748">Voir tout</a></li>
										<li><a href="http://codyhouse.co/?p=748">Blazers</a></li>
										<li><a href="http://codyhouse.co/?p=748">Bomber jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Denim Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Duffle Coats</a></li>
										<li><a href="http://codyhouse.co/?p=748">Leather Jackets</a></li>
										<li><a href="http://codyhouse.co/?p=748">Parkas</a></li>
									</ul>
								</li>

							</ul> <!-- .cd-secondary-dropdown -->
						</li> <!-- 	R√©athl√©tisation FIN	 -->

						<li class="cd-divider">Autre</li>

						<li class="has-children">
							<a href="http://codyhouse.co/?p=748">Contact</a>
							<ul class="cd-dropdown-icons is-hidden">
								<li class="go-back"><a href="#0">Contact</a></li>
								<li>
									<a class="cd-dropdown-item item-1" href="http://codyhouse.co/?p=748">
										<h3>Instagram</h3>
										<p>This is the item description</p>
									</a>
								</li>

								<li>
									<a class="cd-dropdown-item item-2" href="http://codyhouse.co/?p=748">
										<h3>TikTok</h3>
										<p>This is the item description</p>
									</a>
								</li>

								<li>
									<a class="cd-dropdown-item item-3" href="http://codyhouse.co/?p=748">
										<h3>Mail</h3>
										<p>This is the item description</p>
									</a>
								</li>

								<li>
									<a class="cd-dropdown-item item-4" href="http://codyhouse.co/?p=748">
										<h3>MonRdvKin√©</h3>
										<p>This is the item description</p>
									</a>
								</li>

								<li>
									<a class="cd-dropdown-item item-5" href="http://codyhouse.co/?p=748">
										<h3>T√©l√©phone</h3>
										<p>This is the item description</p>
									</a>
								</li>

								<li>
									<a class="cd-dropdown-item item-6" href="http://codyhouse.co/?p=748">
										<h3>Google Map</h3>
										<p>This is the item description</p>
									</a>
								</li>

							</ul> <!-- .cd-dropdown-icons -->
						</li> <!-- .has-children -->
					</ul> <!-- .cd-dropdown-content -->
				</nav> <!-- .cd-dropdown -->
			</div> <!-- .cd-dropdown-wrapper -->
		</div>

	</header>

	<!--			 MAIN			 -->

	<main class="cd-main-content">
		<h1>Bienvenue dans le site web IMSSA</h1>
		<img src="img/cabinet.webp" alt="cabinet IMSSA" id="image-cabinet">

	</main>


	<!--			 MAIN			 -->

	<script src="js/jquery-2.1.1.js"></script>
	<script src="js/jquery.menu-aim.js"></script> <!-- menu aim -->
	<script src="js/main.js"></script> <!-- Resource jQuery -->

	<footer class="site-footer">
    <p>&copy; Cabinet Kin√©</p>
    </footer>







    <script type="module">
    // 1) Imports Firebase (v12 modules)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import {
      getAuth,
      onAuthStateChanged,
      signInWithPopup,
      GoogleAuthProvider,
      signOut
    } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
    import {
      getFirestore,
      doc,
      getDoc,
      setDoc
    } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js";

    // 2) Ta config Firebase (copi√©e depuis la console > CDN > Compat ou Modules)
    const firebaseConfig = {
      apiKey: "AIzaSyA7r18GtsCIi1n2AoaBFG-lAYyBPXFIw4Q",
      authDomain: "imssa-2d3cb.firebaseapp.com",
      projectId: "imssa-2d3cb",
      storageBucket: "imssa-2d3cb.appspot.com",
      messagingSenderId: "976927404721",
      appId: "1:976927404721:web:3484dd21e9e52a1e692890",
      measurementId: "G-SKTEPM9LKC"
    };

    // 3) Initialisation Firebase
    const app  = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db   = getFirestore(app);

    // 4) Gestion du bouton Google Sign-In / Sign-Out
    const btnGoogle = document.getElementById("btn-google");
    btnGoogle.addEventListener("click", () => {
      if (!auth.currentUser) {
        signInWithPopup(auth, new GoogleAuthProvider()).catch(console.error);
      } else {
        signOut(auth).catch(console.error);
      }
    });

    // 5) √âcoute de l‚Äô√©tat de connexion et initialisation des boutons ‚ù§Ô∏è/ü©∂
	const largeurEcran = window.innerWidth; // Largeur de l'√©cran visible
    onAuthStateChanged(auth, async user => {
      if (user) {
		if (largeurEcran > 1024) {
        	btnGoogle.textContent = `üë§ ${user.displayName}`;
		}else{
			btnGoogle.textContent = `üë§`;
		}
        // R√©cup√®re les favoris dans Firestore
        const ref  = doc(db, "users", user.uid);
        const snap = await getDoc(ref);
        const favs = snap.exists() ? snap.data().favoris : [];
        initButtons(favs, user.uid);
      } else {
        btnGoogle.textContent = "üîí";
        initButtons([], null);
      }
    });

    // 6) Fonctions de gestion des favoris
    async function toggleFavori(id, label, btn, uid) {
      if (!uid) {
        alert("Connectez-vous d‚Äôabord pour g√©rer vos favoris.");
        return;
      }
      const ref  = doc(db, "users", uid);
      const snap = await getDoc(ref);
      let favs    = snap.exists() ? snap.data().favoris : [];
      const idx   = favs.findIndex(f => f.id === id);
      if (idx !== -1) favs.splice(idx, 1);
      else            favs.push({ id, label });
      // Sauvegarde en base
      await setDoc(ref, { favoris: favs }, { merge: true });
      // Mise √† jour du bouton
      btn.textContent = idx !== -1 ? "ü©∂" : "‚ù§Ô∏è";
    }

    function initButtons(favs, uid) {
      document.querySelectorAll(".fav-btn").forEach(btn => {
        const { id, label } = btn.dataset;
        btn.textContent = favs.some(f => f.id === id) ? "‚ù§Ô∏è" : "ü©∂";
        btn.onclick = () => toggleFavori(id, label, btn, uid);
      });
    }
  </script>
</body>

</html>
